dist: bionic
language: cpp

before_script:
- bash get_ndk.sh
- bash mk_toolchain.sh
- bash get_ace_tao.sh
- bash get_opendds.sh
- if ${use_security:-false}; then bash get_xerces.sh; fi
- if ${use_security:-false} ; then bash get_openssl.sh; fi

script:
- set -e
- bash configure.sh
- bash build.sh

matrix:
  include:
# BEGIN MATRIX
# This part is generated by matrix.py
# r21b ========================================
    - name: "r21b-arm64-29-security-java"
      env:
        - arch=arm64
        - ndk=r21b
        - api=29
        - use_security=true
        - use_java=true
    - name: "r21b-arm64-28"
      env:
        - arch=arm64
        - ndk=r21b
        - api=28
    - name: "r21b-arm64-27"
      env:
        - arch=arm64
        - ndk=r21b
        - api=27
    - name: "r21b-arm64-26"
      env:
        - arch=arm64
        - ndk=r21b
        - api=26
    - name: "r21b-arm64-24"
      env:
        - arch=arm64
        - ndk=r21b
        - api=24
    - name: "r21b-arm64-23"
      env:
        - arch=arm64
        - ndk=r21b
        - api=23
    - name: "r21b-arm64-22"
      env:
        - arch=arm64
        - ndk=r21b
        - api=22
    - name: "r21b-arm64-21"
      env:
        - arch=arm64
        - ndk=r21b
        - api=21
    - name: "r21b-arm-19"
      env:
        - arch=arm
        - ndk=r21b
        - api=19
    - name: "r21b-arm-18"
      env:
        - arch=arm
        - ndk=r21b
        - api=18
    - name: "r21b-arm-17"
      env:
        - arch=arm
        - ndk=r21b
        - api=17
    - name: "r21b-arm-16-security-java"
      env:
        - arch=arm
        - ndk=r21b
        - api=16
        - use_security=true
        - use_java=true
    - name: "r21b-arm64-29-oci-ace-tao"
      env:
        - arch=arm64
        - ndk=r21b
        - api=29
        - use_oci_ace_tao=true
    - name: "r21b-arm64-28-oci-ace-tao"
      env:
        - arch=arm64
        - ndk=r21b
        - api=28
        - use_oci_ace_tao=true
    - name: "r21b-arm64-27-oci-ace-tao"
      env:
        - arch=arm64
        - ndk=r21b
        - api=27
        - use_oci_ace_tao=true
    - name: "r21b-arm64-26-oci-ace-tao"
      env:
        - arch=arm64
        - ndk=r21b
        - api=26
        - use_oci_ace_tao=true
    - name: "r21b-arm64-24-oci-ace-tao"
      env:
        - arch=arm64
        - ndk=r21b
        - api=24
        - use_oci_ace_tao=true
    - name: "r21b-arm64-23-oci-ace-tao"
      env:
        - arch=arm64
        - ndk=r21b
        - api=23
        - use_oci_ace_tao=true
    - name: "r21b-arm64-22-oci-ace-tao"
      env:
        - arch=arm64
        - ndk=r21b
        - api=22
        - use_oci_ace_tao=true
    - name: "r21b-arm64-21-oci-ace-tao"
      env:
        - arch=arm64
        - ndk=r21b
        - api=21
        - use_oci_ace_tao=true
    - name: "r21b-arm-19-oci-ace-tao"
      env:
        - arch=arm
        - ndk=r21b
        - api=19
        - use_oci_ace_tao=true
    - name: "r21b-arm-18-oci-ace-tao"
      env:
        - arch=arm
        - ndk=r21b
        - api=18
        - use_oci_ace_tao=true
    - name: "r21b-arm-17-oci-ace-tao"
      env:
        - arch=arm
        - ndk=r21b
        - api=17
        - use_oci_ace_tao=true
    - name: "r21b-arm-16-oci-ace-tao"
      env:
        - arch=arm
        - ndk=r21b
        - api=16
        - use_oci_ace_tao=true
# r20b ========================================
    - name: "r20b-arm64-29"
      env:
        - arch=arm64
        - ndk=r20b
        - api=29
    - name: "r20b-arm64-28"
      env:
        - arch=arm64
        - ndk=r20b
        - api=28
    - name: "r20b-arm-16"
      env:
        - arch=arm
        - ndk=r20b
        - api=16
# r19c ========================================
    - name: "r19c-arm64-28"
      env:
        - arch=arm64
        - ndk=r19c
        - api=28
    - name: "r19c-arm-16"
      env:
        - arch=arm
        - ndk=r19c
        - api=16
# r18b ========================================
    - name: "r18b-arm64-28"
      env:
        - arch=arm64
        - ndk=r18b
        - api=28
    - name: "r18b-arm-16"
      env:
        - arch=arm
        - ndk=r18b
        - api=16
# r17c ========================================
    - name: "r17c-arm64-28"
      env:
        - arch=arm64
        - ndk=r17c
        - api=28
    - name: "r17c-arm64-27"
      env:
        - arch=arm64
        - ndk=r17c
        - api=27
    - name: "r17c-arm64-26"
      env:
        - arch=arm64
        - ndk=r17c
        - api=26
    - name: "r17c-arm-16"
      env:
        - arch=arm
        - ndk=r17c
        - api=16
# r15c ========================================
    - name: "r15c-arm64-26"
      env:
        - arch=arm64
        - ndk=r15c
        - api=26
    - name: "r15c-arm64-24"
      env:
        - arch=arm64
        - ndk=r15c
        - api=24
    - name: "r15c-arm-16"
      env:
        - arch=arm
        - ndk=r15c
        - api=16
# r14b ========================================
    - name: "r14b-arm64-24"
      env:
        - arch=arm64
        - ndk=r14b
        - api=24
    - name: "r14b-arm-16"
      env:
        - arch=arm
        - ndk=r14b
        - api=16
# r12b ========================================
    - name: "r12b-arm64-24"
      env:
        - arch=arm64
        - ndk=r12b
        - api=24
    - name: "r12b-arm64-21"
      env:
        - arch=arm64
        - ndk=r12b
        - api=21
    - name: "r12b-arm-16"
      env:
        - arch=arm
        - ndk=r12b
        - api=16
